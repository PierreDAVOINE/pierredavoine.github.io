(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const d="9843a344764c7816f2325b732271f5e4",e={months:["Janv","F√©vr","Mars","Avril","Mai","Juin","Juil","Aout","Sept","Oct","Nov","Dec"],counterRefresh:0,actualCity:"Paris",actualCityTitle:document.querySelector("#now h2"),actualWeatherTxt:document.getElementById("actual-weather_txt"),actualWeatherImg:document.getElementById("actual-weather_img"),actualTempTxt:document.getElementById("actual-temp_txt"),actualFeelTxt:document.getElementById("actual-feel_txt"),actualWindTxt:document.getElementById("actual-wind_txt"),actualHumidityTxt:document.getElementById("actual-humidity_txt"),actualSunTxt:document.getElementById("actual-sun_txt"),actualSunImg:document.getElementById("actual-sun_img"),forecastHoursDiv:document.getElementById("forecastHours"),forecastDaysDiv:document.getElementById("forecastDays"),cityForm:document.getElementById("city-form"),cityInput:document.getElementById("city"),notificationsDiv:document.getElementById("notifications"),init:async()=>{console.log("Initialisation de l'application en cours..."),e.cityForm.addEventListener("submit",e.handleFormSubmit),e.refreshApp(),console.log("Application initialis√©e."),e.notify("Bienvenue, veuillez choisir votre ville")},refreshApp:async()=>{console.log("R√©ception du formulaire...");const t=await e.getLocation();if(t.lat===0&&t.lon===0||t.lat===void 0||t.lon===void 0)e.notify("Aucune ville n'a √©t√© trouv√©e √† ce nom... üò¢",5,"error");else{const a=await e.getWeather(t);e.showWeatherInDom(a);const n=await e.getForecast(t);e.showForecastHoursInDom(n),e.showForecastDaysInDom(n),e.cityInput.value="",e.counterRefresh>0&&e.notify(`Voici la m√©t√©o pour ${e.actualCity} üòÑ`,5,"nice"),e.counterRefresh++}},getLocation:async()=>{console.log(`R√©cup√©ration des coordonn√©es en cours pour la ville de ${e.actualCity}...`);try{const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e.actualCity.toLowerCase()},fr&limit=2&appid=${d}`);if(t.status!==200)throw new Error("Probl√®me API");const a=await t.json(),n={lat:0,lon:0};return a.length===0?(console.log("Ville non trouv√©e..."),n):(n.lat=a[0].lat,n.lon=a[0].lon,n)}catch(t){console.error(t);return}},getWeather:async t=>{const{lat:a,lon:n}=t;console.log(`Recherche de la m√©t√©o pour la lattitude : ${a} et longitude : ${n}`);try{const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${n}&lang=fr&units=metric&appid=${d}`);if(r.status!==200)throw new Error("Probl√®me API");const o=await r.json();return console.log("Donn√©es r√©ceptionn√©es"),o}catch(r){console.error(r);return}},getForecast:async t=>{const{lat:a,lon:n}=t;console.log(`Recherche des pr√©visions m√©t√©o pour la lattitude : ${a} et longitude : ${n}`);try{const r=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${a}&lon=${n}&lang=fr&units=metric&appid=${d}`);if(r.status!==200)throw new Error("Probl√®me API");const o=await r.json();return console.log("Donn√©es r√©ceptionn√©es"),o.list}catch(r){console.error(r);return}},showWeatherInDom:t=>{console.log("Affichage des donn√©es en cours..."),e.actualCityTitle.textContent=`Actuellement √† ${e.actualCity}`;const a=t.weather[0].description;e.actualWeatherTxt.textContent=a[0].toUpperCase()+a.slice(1),e.actualWeatherImg.src=`https://openweathermap.org/img/wn/${t.weather[0].icon}.png`,e.actualTempTxt.textContent=`${t.main.temp.toFixed(1)}¬∞C`,e.actualFeelTxt.textContent=`Ressenti : ${t.main.feels_like.toFixed(1)}¬∞C`,e.actualWindTxt.textContent=`${(t.wind.speed*3.6).toFixed(2)} km/h`,e.actualHumidityTxt.textContent=`${Math.round(t.main.humidity)}% d'humitit√©`;const n="0"+new Date(t.sys.sunrise*1e3).getHours()+"h"+new Date(t.sys.sunrise*1e3).getMinutes(),r=new Date(t.sys.sunset*1e3).getHours()+"h"+new Date(t.sys.sunset*1e3).getMinutes();e.actualSunTxt.textContent=`Lev√© √† ${n} couch√© √† ${r}`,t.weather[0].id.toString()[0]==="7"?document.body.style.background="url('../public/img/Fog.jpg') no-repeat center/cover fixed":document.body.style.background=`url('../public/img/${t.weather[0].main}.jpg') no-repeat center/cover fixed`,console.log("Donn√©es actualis√©es dans le DOM.")},showForecastHoursInDom:t=>{console.log("Affichage des pr√©visions des 9 prochaines heures en cours..."),e.forecastHoursDiv.textContent="";for(let a=0;a<3;a++){const n=t[a],r=document.createElement("div");r.className="card";const o=document.createElement("div");o.className="date";const c=new Date(n.dt*1e3);o.textContent=`${c.getDate()}-${e.months[c.getMonth()]} ${c.getHours()}h`;const i=document.createElement("div");i.className="card__weather";const s=document.createElement("img");s.src=`https://openweathermap.org/img/wn/${n.weather[0].icon}.png`,s.alt=n.weather[0].main;const l=document.createElement("div");l.textContent=`${n.main.temp.toFixed(1)}¬∞C`,i.append(s,l),r.append(o,i),e.forecastHoursDiv.appendChild(r)}},showForecastDaysInDom:t=>{console.log("Affichage des pr√©visions des 9 prochaines heures en cours..."),e.forecastDaysDiv.textContent="";for(let a=1;a<5;a++){const n=e.getForecastPerDay(a,t),r=document.createElement("div");r.className="card";const o=document.createElement("div");o.className="date",o.textContent=n.date;const c=document.createElement("div"),i=document.createElement("div");i.textContent="Matin";const s=document.createElement("div");s.className="card__weather";const l=document.createElement("img");l.src=n.am.weatherIcon,l.alt=n.am.altIcon;const p=document.createElement("div");p.textContent=n.am.temp,s.append(l,p),c.append(i,s);const h=document.createElement("div"),g=document.createElement("div");g.textContent="Apr√®s-midi";const u=document.createElement("div");u.className="card__weather";const m=document.createElement("img");m.src=n.pm.weatherIcon,m.alt=n.pm.altIcon;const f=document.createElement("div");f.textContent=n.pm.temp,u.append(m,f),h.append(g,u),r.append(o,c,h),e.forecastDaysDiv.appendChild(r)}},getForecastPerDay:(t,a)=>{console.log(`R√©cup√©ration des pr√©visions pour J+${t}`);const n=new Date,r=new Date;r.setDate(n.getDate()+t);const o=a.find(i=>{const s=new Date(i.dt*1e3);return s.getDate()===r.getDate()&&s.getHours()>7&&s.getHours()<12}),c=a.find(i=>{const s=new Date(i.dt*1e3);return s.getDate()===r.getDate()&&s.getHours()>13&&s.getHours()<18});return{date:`${r.getDate()}-${e.months[r.getMonth()]}`,am:{weatherIcon:`https://openweathermap.org/img/wn/${o.weather[0].icon}.png`,altIcon:o.weather[0].main,temp:`${o.main.temp.toFixed(1)}¬∞C`},pm:{weatherIcon:`https://openweathermap.org/img/wn/${c.weather[0].icon}.png`,altIcon:c.weather[0].main,temp:`${c.main.temp.toFixed(1)}¬∞C`}}},handleFormSubmit:t=>{var o;t.preventDefault(),console.log("Soumission du formulaire. R√©cup√©ration des donn√©es...");const n=(o=new FormData(e.cityForm).get("city"))==null?void 0:o.toString(),r=encodeURIComponent(n);isNaN(r)?(e.actualCity=r,e.refreshApp()):e.notify("Vous avez saisit un nombre ! Veuillez saisir une ville fran√ßaise üòÑ",5,"error")},notify:(t,a=3,n="neutral")=>{e.notificationsDiv.className=n,e.notificationsDiv.textContent=t,setTimeout(()=>{e.notificationsDiv.className=""},a*1e3)}};document.addEventListener("DOMContentLoaded",e.init);